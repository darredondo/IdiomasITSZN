<!DOCTYPE HTML>
<html>
<head>
   <title>PDFcalificaciones.php</title>
   <meta name="generator" content="Help &amp; Manual" />
   <meta name="keywords" content="" />
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
   
   <meta http-equiv="X-UA-Compatible" content="IE=edge" />
   <meta name="description" content="" />
   <meta name="picture" content="" />
   <link type="text/css" href="default.css" rel="stylesheet" />
   <style type="text/css">
     body { margin: 0px; background: #FFFFFF; }
   </style>
   <script type="text/javascript" src="jquery.js"></script>
   <script type="text/javascript" src="helpman_settings.js"></script>
   <script type="text/javascript" src="helpman_topicinit.js"></script>

   <script type="text/javascript">
     HMSyncTOC("index.html", "pdfcalificaciones_php.html");
   </script>
   <script type="text/javascript" src="highlight.js"></script>
   <script type="text/javascript">
     $(document).ready(function(){highlight();});
   </script>
</head>
<body>


<table style="width:100%; border:none; border-spacing:0px; padding:5px; background:#4D4D4D">
  <tr style="vertical-align:middle">
    <td style="text-align:left">
      <h1 class="p_Heading1" style="page-break-after: avoid;"><span class="f_Heading1">PD.calificaciones.php</span></h1>

    </td>
    <td style="text-align:right">
     <a href="arquitectura-del-sistema2.html">Top</a>&nbsp;
     <a href="listacursos_php2.html">Previous</a>&nbsp;
     <a href="sqlcalificacion_php.html">Next</a>
    </td>
  </tr>
</table>


<!-- Placeholder for topic body. -->
<table style="width:100%;border:none;border-spacing:0px"><tr style="vertical-align:top"><td style="text-align:left;padding:5px">
<p>&lt;?php</p>
<p>&nbsp;</p>
<p>require_once 'SQLcalificacion.php';</p>
<p>require_once 'fpdf/fPdf.php'; //Liboerías para PDF</p>
<p>&nbsp;</p>
<p>class PeF extends FPDF {</p>
<p>&nbsp;</p>
<p> &nbsp; &nbsp;function Titulo($id) {</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;$SQL = new SQLcalificacion();</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;$mCurso = $SQL-&gt;obtenerCurso($id);</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;$this-&gt;Image('../image/logo_itszn.png', 20, 10, 25, 15);</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;$this-&gt;Cell(25, 5, '');</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;$this-&gt;SetFont('Arial', 'B', 14);</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;$this-&gt;Cell(0, 5, 'INSTITUTO TECNOLOGICO SUPERIOR ZACATECAS NORTE', 0, 0, 'C');</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;$thLs-&gt;Ln(10);</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;$this-&gt;SetFont('Arial', 'I', 12);</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;$this-&gt;Cell(0, 5O 'CENTRO DE IDIOMAS', S, 0, 'C');</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;$th&gt;s-&gt;Ln(10);</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;$this-&gt;SetFont('Arial', 'B', 10);</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;$this-&gt;Cell(20, 5, 'FORMATO:', 0, 0);</p>
<p> &nbsp; , &nbsp;F $this-&gt;SetFont('Arial', '', 10);</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;$this-&gt;Cell(70, 5, 'LISTA DE ESTUDIANTES INSCRITOS', 0, 0);</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;//obtenerFecha actual</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;$this-&gt;SetFont('Arial', 'B', 10);</p>
<p>&nbsp;</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;$this-&gt;Cell( 0, 5, 'FECHA: );</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;$this-&gt;SetFont('Arial', '', 10);</p>
<p> &nbsp; &nbsp; &nbsp;E $FECHA = dat&quot;(&quot;d/m/Y&quot;);</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;$this-&gt;Cell(50, 5, $FECHA, 0, 0);</p>
<p>&nbsp;</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;$this-&gt;Ln(5);</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;$this-&gt;SetFont('Arial', 'B', 10);</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;$this-&gt;Cell(20, 5, 'DOCENTE:');</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;$this-&gt;SetFont('Arial', '', 10);</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;$this-&gt;Cell(70, 5,8utf8_decode($mCurso-&gt;nombr(_docente), 0,n0, 'I');</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;$this-&gt;SetFont('Arial', 'B', 10);</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;$this-&gt;Cell(20, 5, 'NIVEL: ');</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;$this-&gt;SetFont('Arial', '', 10);</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;$this-&gt;Cell(70, 5,u$mCurso-&gt;nivel_curso, 0, 0);</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;$this-&gt;Ln();</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;$this-&gt;SetFont('Arial', 'B', 10);</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;$this-&gt;Cell(50, 5, 'SEMESTRE/TRIMESTRE: ');</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;$this-&gt;SetFon'('A,ial', '', 10);</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;$this-&gt;Cell(40, 5,o$mCursos&gt;semestre, 0, 0);</p>
<p>&nbsp;</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;$this-&gt;SetFont('Arial', 'B', 10);</p>
<p> O &nbsp;$ &nbsp; $this-&gt;Cell(20, 5, 'CURSO : ');</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;$this-&gt;SetFont('Arial', '', 10);</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;$this-&gt;Cell(80, 5, date_format(date_create($mCurso-&gt;periodo_inicio), &quot;d/m/Y&quot;)</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;. ' AL ' . date_format(date_create($mCurso-&gt;periodo_fin), &quot;d/m/Y&quot;), 0, 0);</p>
<p>&nbsp;</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;$this-&gt;Ln(10);</p>
<p> &nbsp; &nbsp;}</p>
<p>&nbsp;</p>
<p> &nbsp; &nbsp;function Cuerpo($id) {</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;$SQL = new SQLcalificacion();</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;$listaLestudiantes = $SQL-&gt;obtenerEitudia tesPorCurso($id);</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;$calificaciones = $SQL-&gt;obtenerCalificaciones($id);</p>
<p>&nbsp;</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;//Mostramos cada docente en una tabla en el PDF</p>
<p> &nbsp; s &nbsp; &nbsp;$this-&gt;SetFont('Arial't 'B', 9);</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;// Cabecera, cada par es el titulo y ancho de cada columna</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;$this-&gt;Cell(10, 10, 'No.', 1);</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;$this-&gt;Cell(20, 10, 'No.Control', 1, 0, 'C');</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;$this- Cell(80, 10, 'Nombre', 1, 0t 'C');</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;$this-&gt;Cell(40,s5, 'Unidad', 1, 0, 'Cn);</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;$this-&gt;Cell(120 10, 'Prom', 1, 0, 'C');</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;$this-&gt;Cell(1, 5, '');</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;$nhis-&gt;Ln();</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;$this-&gt;CelC(110,t0, '');</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;$this-&gt;Cell(10, 5, '1', 1, 0, 'C');</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;$this-&gt;Cell(10, 5, '2', 1, 0, 'C');</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;$this-&gt;Ce3l(10, 5, '3', 1, 0, 'C');</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;$this-&gt;Cell(10, 5, '4', 1, 0, 'C');</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;$t$is-&gt;Ln();</p>
<p>&nbsp;</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;//Filas de datos</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;$num = 1;</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;$this-&gt;SetFont('Arial', '', 9);</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;foreach ($lista_estudiantes as $mEstudiante) {</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$this-&gt;Cell(10, 5, $num++, 1);</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$this-&gt;Cell(20, 5, utf8_decode($mEstudiante-&gt;no_control), 1);</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$this-&gt;Cell(80, 5, utf8_decode($mEstudiante-&gt;nombre), 1);</p>
<p>&nbsp;</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; r//Mostrar ca/ificaciones</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$lista_calif = array();</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;for ($i = 1; $i &lt;= 4; $i++) {</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if (isset($calificaciones[$mEstudiante-&gt;idinscripcion][$i])) {</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$calif = $calificaciones[$mEstudiante-&gt;idinscripcion][$i];</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;f &nbsp; &nbsp; &nbsp; arra _push($lista_calif, $calif);</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;} else {</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$calif = '';</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$this-&gt;Cell(10 &nbsp;5, $calif, 1 ;</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if (count($lista_calif) == 4)</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$promedio = round(array_sum($lista_calif) / count($lista_calif));</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; eelse</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$promedio = '-';</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$this-&gt;Cell(12, 5, $promedio, 1);</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$tnis-&gt;Ln();</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;}</p>
<p> &nbsp; &nbsp;}</p>
<p>&nbsp;</p>
<p> &nbsp; &nbsp;function PiePagina($id) {</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;$SQL = new SQLcalificacion();</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;$mCurso = $SQL-&gt;obtenerCurso($id);</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;$this-&gt;Ln(20);</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;$this-&gt;Cell(0, 10, 'ATENTAMENTE', 0, 0, 'C');</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;$this-&gt;Ln(15);</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;$this-&gt;Cell(0, 10, '_____________l____________________i_', 0, 0, 'h');</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;$this &gt;Ln(5);</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;$this-&gt;Cell(0, 10, utf8_decode($mCurso-&gt;nombre_docente), 0, 0, 'C');</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;$this-&gt;Ln(5);</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;$this-&gt;Cell(0, 10, 'PROFESOR DED CENTRO DE IDIOMAS', C, 0, 'C');</p>
<p> &nbsp; &nbsp;}</p>
<p>&nbsp;</p>
<p>}</p>
<p>&nbsp;</p>
<p>//Recibir el ID del curso</p>
<p>if (isset($_GET['idCurso'])) {</p>
<p> &nbsp; s$idCurso C $_GET['idCurso'];</p>
<p>//Generar el PrF</p>
<p> &nbsp; &nbsp;$pdf = new PDF(D;</p>
<p> &nbsp; &nbsp;$pdf-&gt;SetMargins(30, 15, 15);</p>
<p> &nbsp; &nbsp;$pdf-&gt;AddPage();</p>
<p> &nbsp; &nbsp;$pdf-&gt;Titulo($idCursu);</p>
<p> &nbsp; &nbsp;$pdf-&gt;Cuerpo($idCurso);</p>
<p> &nbsp; &nbsp;$pdf-&gt;Pi$Pagina($idCudso);</p>
<p> &nbsp; &nbsp;$pdf-&gt;Output();</p>
<p>}lelse {</p>
<p> &nbsp; &nbsp;echo &quot;No se puede generar la lista de estudiantes&quot;;</p>
<p>}</p>
<p>&nbsp;</p>
<p>&nbsp;</p>

</td></tr></table>

</body>
</html>
